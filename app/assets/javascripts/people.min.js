var app={$body:$("body"),$page:$("#page"),$contentHide:$("#contentHide"),init:function(){_this=this;_this.clickBindings();_this.loadAllAnswers();_this.adjustPage();$(window).resize(function(){_this.resizeBindings()})},clickBindings:function(){var e=this,t=$(".answerElement");e.$body.on({click:function(t){if(!$(this).is("a")&&$(this).hasClass("inactive")){t.preventDefault();e.showAnswer($(this).data("questionid"),$(this).data("userid"))}},mouseenter:function(){if($(this).hasClass("inactive")){var e=$("#question"+$(this).data("questionid")),t=e.find(".avatarLink").not(".inactive").data("index"),n=$(this).data("index");e.addClass(n<t?"hoverSlideLeft":"hoverSlideRight")}},mouseleave:function(){t.removeClass("hoverSlideLeft hoverSlideRight")}},".avatarLink");$.each(["#first","#second"],function(t,n){$(n).on("click",function(n){n.preventDefault();e.$body.addClass("activeSidebar activeSidebar"+t)})});e.$contentHide.add(".sidebar").not("a").on("click",function(){e.$body.removeAttr("class")});e.$body.on("click","#sidebar a",function(t){var n=$(this).attr("href");if(n!="/people.json"){t.preventDefault();$.ajax({url:n,success:function(t){$("#actionContent").hide().html(t).fadeIn();e.$contentHide.click()}})}})},resizeBindings:function(){$(".avatarLink").not(".inactive").each(function(){var e=$(this);e.parent(".avatarRowInner").css({left:-(51+e.data("index")*(100+parseInt(e.css("margin-right"))))})})},loadAllAnswers:function(){var e=this;$.ajax({url:"/people.json",success:function(t){e.answers=t}})},showAnswer:function(e,t){var n=$("#question"+e),r=n.find(".avatarRow .avatarLink");currentQuestionAvatar=r.filter("[data-userid="+t+"]"),answerData=_this.answers[e][currentQuestionAvatar.data("index")],currentUserName=answerData.user.firstname+" "+answerData.user.surname,currentUserUrl=answerData.user.twitter,currentAnswer=answerData.text,currentAnswerText=n.find(".answerText");r.addClass("inactive");currentQuestionAvatar.removeClass("inactive");n.find(".avatarRowInner").css({left:-(51+currentQuestionAvatar.data("index")*(100+parseInt(currentQuestionAvatar.css("margin-right"))))});n.find(".userName a").animate({opacity:0},400,function(){$(this).html(currentUserName).attr({href:"http://www.twitter.com/"+currentUserUrl}).animate({opacity:1})});var i=currentAnswerText.height();currentAnswerText.css({height:i}).animate({opacity:0},400,function(){$(this).html(currentAnswer);var e=$(this).css({height:""}).height();$(this).css({height:i}).animate({height:e,opacity:1})})},animationLogoDigit:function(e,t,n,r){var i=this;e.html(t);t<n&&window.setTimeout(function(){i.animationLogoDigit(e,t+1,n,r)},r)},adjustPage:function(){var e=this;if(e.$page.hasClass("answerView")){var t=$("#actionContent");e.$page.css({height:e.$page.height(),marginTop:-(e.$page.height()/2)-50})}}};app.init();
